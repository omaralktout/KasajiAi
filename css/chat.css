:root{
  --primary-color:#111111;
  --secondary-color:#4f46e5;
  --tertiary-color:#06b6d4;

  --fg:#111; --muted:#6b7280; --bot:#f3f4f6; --user:#e6f0ff;
  --radius:12px; --shadow:0 10px 28px rgba(0,0,0,.16);
  --grad: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 50%, var(--tertiary-color) 100%);
  --white:#fff;
}

#chat-widget{
  position: fixed;
  left: 16px;              /* يسار دائمًا */
  right: auto;             /* عطّل اليمين */
  bottom: 16px;
  z-index: 10000;
  width: 320px; 
  max-width: 92vw;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
  color: var(--fg);
}

/* المربع الصغير (شريط الفتح) */
.cw-bar{
  background: var(--grad);
  color: var(--white);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px; cursor:pointer; user-select:none;
}
.cw-bar-title{ 
  font-weight:700; font-size:14px; letter-spacing:.2px;
}
.cw-bar-toggle{
  border:none; background:transparent; color:inherit; font-size:16px; cursor:pointer;
  transform:rotate(180deg);
}
#chat-widget.open .cw-bar-toggle{ transform:rotate(0deg) }

/* اللوحة */
.cw-panel{
  margin-top:8px; background:#fff; border:1px solid #e5e7eb; border-radius:var(--radius);
  box-shadow:var(--shadow); overflow:hidden; display:flex; flex-direction:column;
}

/* رأس اللوحة */
.cw-head{
  background: var(--grad); color: var(--white);
  display:flex; align-items:center; justify-content:space-between; padding:10px 12px;
}
.cw-close{ border:none; background:transparent; color:inherit; font-size:18px; cursor:pointer }

/* الرسائل */
.cw-log{
  background:#fff; padding:12px; display:flex; flex-direction:column; gap:8px;
  max-height:46vh; overflow:auto;
}
.msg{ padding:8px 10px; border-radius:10px; max-width:85%; line-height:1.45; word-wrap:break-word }
.msg.bot{ background:var(--bot); align-self:flex-start }
.msg.user{ background:var(--user); align-self:flex-end }

/* الإدخال */
.cw-form{ display:flex; gap:8px; padding:10px; border-top:1px solid #eee; background:#fff }
#cw-input{
  flex:1; padding:10px 12px; border:1px solid #e5e7eb; border-radius:10px; outline:none;
}
#cw-input:focus{ border-color:#cbd5e1 }
#cw-send{
  padding:10px 14px; border:none; border-radius:10px; background: var(--grad);
  color:#fff; cursor:pointer;
}

/* ================== موبايل: الودجت وهو مسكَّر أصغر، وعند الفتح يتمدّد ================== */
@media (max-width: 480px){
  /* الحالة الافتراضية (مغلق): صندوق أصغر على اليسار */
  #chat-widget{
    left: 10px;
    right: auto;
    bottom: 10px;
    width: 240px;          /* ← عدّلها 220–280 حسب رغبتك */
    max-width: 80vw;       /* يضمن عدم تجاوز الشاشة */
  }

  /* عند الفتح: خليه ياخذ عرض الشاشة تقريبًا */
  #chat-widget.open{
    left: 10px;
    right: 10px;
    width: auto;
    max-width: none;
  }

  .cw-bar{
    padding: 8px 10px;
    border-radius: 10px;
  }
  .cw-bar-title{
    font-size: 13px;
    max-width: 160px;      /* قصّ أنيق للنص الطويل */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .cw-bar-toggle{ font-size: 14px; }

  .cw-panel{ border-radius: 10px; }
  .cw-head{ padding: 8px 10px; }
  .cw-close{ font-size: 16px; }

  .cw-log{
    padding: 8px;
    max-height: 42vh;      /* قلّل الارتفاع حتى ما تغطي الشاشة كثير */
  }

  .cw-form{ padding: 8px; gap: 6px; }
  #cw-input{ padding: 8px 10px; font-size: 14px; }
  #cw-send{ padding: 8px 12px; font-size: 14px; }
}

/* أجهزة أضيق جدًا */
@media (max-width: 360px){
  .cw-bar-title{ font-size: 12px; max-width: 130px; }
  #cw-input, #cw-send{ font-size: 13px; }
  .cw-log{ max-height: 38vh; }
}
