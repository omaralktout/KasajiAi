# =========================================
# Hostinger / Apache .htaccess
# Domain: kasaji.ai  (canonical: non-www over HTTPS)
# Clean URLs for pages that live under /html/*.html
# Supports legacy links (html/*.html) by redirecting to clean slugs.
# =========================================

# Enable rewriting
RewriteEngine On

# --- Canonicalize HTTPS ---
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# --- Canonicalize host (www -> non-www). Comment if you prefer www. ---
RewriteCond %{HTTP_HOST} ^www\.kasaji\.ai$ [NC]
RewriteRule ^ https://kasaji.ai%{REQUEST_URI} [R=301,L]

# --- Optional: trim trailing slash (/slug/ -> /slug), except root ---
RewriteCond %{REQUEST_URI} !^/$
RewriteRule ^(.+)/$ /$1 [R=301,L]

# --- Redirect legacy /html/*.html and /html/* to clean slug ---
# /html/voicepulse.html -> /voicepulse
RewriteRule ^html/([A-Za-z0-9_-]+)\.html$ /$1 [R=301,L]
# /html/voicepulse -> /voicepulse
RewriteRule ^html/([A-Za-z0-9_-]+)/?$ /$1 [R=301,L]

# --- Redirect any /slug.html in root to /slug (SEO) ---
RewriteRule ^([A-Za-z0-9_-]+)\.html$ /$1 [R=301,L]

# --- Do not rewrite real files or directories ---
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# --- Exclude common asset folders from rewrites (defensive) ---
RewriteCond %{REQUEST_URI} !^/(css|js|img|images|assets|fonts|vendor)/

# --- Map clean slugs to /html/*.html ---
# /about       -> /html/about.html
# /actionsync  -> /html/actionsync.html
# /insightai   -> /html/insightai.html
# /voicepulse  -> /html/voicepulse.html
RewriteRule ^([A-Za-z0-9_-]+)$ html/$1.html [L]

# --- Optional: /index -> / ---
RewriteRule ^index$ / [R=301,L]
